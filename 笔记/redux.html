<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Document</title>
</head>
<body>
   <script type="text/javascript">
      /*
         这是一个 reducer，形式为 (state, action) => state 的纯函数。
         描述了 action 如何把 state 转变成下一个 state

         state 的形式取决于你，可以是基本类型、数组、对象、
         甚至是 Immutable.js 生成的数据结构。惟一的要点是
         当 state 变化时需要返回全新的对象，而不是修改传入的参数。
      */
      /*
         state immutably
         reducer
            纯函数 
            redux是一个可预测的状态管理的库
      */
      function counter(state = 0,action){
         switch (action.type) {
            case 'INCREMENT':
               return state + 1;
            case 'DECREMENT':
               return state - 1;
            default:
               return state;
         }
      };
      // 创建 Redux store 来存放应用的状态。
      const store = createStore(counter);
      // 设置监听器，用来渲染页面
      store.subscribe(() => {
         let state = store.getState();
         console.log(state);
         $val.val(state);
      });
      /*
         改变内部 state 惟一方法是 dispatch 一个 action
         你应该把要做的修改变成一个普通对象，这个对象被叫做 action,然后编写专门的函数来决定每个 action 如何改变应用的 state，这个函数被叫做 reducer
      */
      store.dispatch({ type: 'INCREMENT' });
      // 1
      store.dispatch({ type: 'INCREMENT' });
      // 2
      store.dispatch({ type: 'DECREMENT' });
   </script>
</body>
</html>
